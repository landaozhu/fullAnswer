## http的缺点
- 通信使用明文，可能会被窃听
- 通信时不会验证双方的身份，可能遭遇伪装
- 无法验证报文的完整性，可能遭遇篡改。
## https
https=http+加密+认证+完整性保护
## 加密技术
- 对称加密：加密和解密同为一个密码，且加解密速度快，典型的对称加密算法有DES、AES
- 非对称加密：密钥成对出现，公钥加密需要私钥解密，私钥加密需要公钥解密。加解密速度慢。

## HTTPS的加密方式
采用混合加密（对称和非对称）
非对称虽然安全，但慢，所以采用两者结合。
![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/91aae7f63ddd40a787f4c8cb1fd386f2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)
首先在服务端，有一对非对称的密钥，一个公钥，一个私钥，把公钥传给客户端，客户端生成一个密钥key，用公钥把密钥加密成二次加密的密钥，返回给服务端，服务端拿到二次加密的密钥，通过私钥解密成密钥key，那么此时客户端和服务端都拿到一个对称的密钥key，加下来之后的传输，就用这把对称的密钥key去进行加密和解密。
为什么这种方法不会有问题，原因是对称加密之所以会不安全，是因为密钥会在过程中传输，暴露在外，所以会被劫持，而这种混合方法暴露在外的是已经通过非对称加密过的密钥，所以被劫持也没有用。通过这种方法，两边都得到一把对称密钥，且不会在外暴露，那么之后的一个数据传输就用这个对称加密来加解密就可以了，这样速度也很快。
## CA证书
因为公钥在传输有可能被替换，不是真正服务器发出来的公钥，所以需要证书认证
## https通信过程
![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/50ef377497444f3da6c3a4f2d92a8fd4~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)
大致分为三个过程：证书校验、建立连接、数据传输
1）客户端发送请求给服务端
2）服务端保存有CA证书，这个证书包含非对称加密的公钥以及其他公司信息
3）服务端响应请求，把证书给客户端
4）客户端拿到证书，进行解析，验证合法性，得到公钥，并且生成一个随机码，key，也就是对称加密的key，用公钥对其加密，得到二次加密的密钥
5）客户端把加密的密钥传给服务端
6）服务端用私钥对其解密，得到对称的密钥。此时客户端和服务端同时拿到对称加解密的密钥。建立连接。
7）客户端用对称的密钥加密，传给服务端，服务端拿到对称加密的密钥，解密。
8）双方愉快的传递消息。
## 总结
http和https的区别
- http明文传输，https加密传输，安全性较好
- https需要申请证书，需要一定费用
- http响应速度快，因为加密需要时间
- https是构建在SSL/TLS之上的http协议，所以更消耗服务器资源
- http端口80，https端口443
## 参考
- [HTTPS介绍及加密的过程](202309122213587566953303EB04EDC904)
- 双越老师的面试全家桶